(self.webpackChunkmobile_avengers=self.webpackChunkmobile_avengers||[]).push([[3590],{69100:function(e,r,t){var n=t(99489);function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(r,t,s){return a()?e.exports=i=Reflect.construct:e.exports=i=function(e,r,t){var a=[null];a.push.apply(a,r);var i=new(Function.bind.apply(e,a));return t&&n(i,t.prototype),i},i.apply(null,arguments)}e.exports=i},84193:function(e,r,t){"use strict";t.d(r,{J:function(){return n}});var n={CONSUME:0,CONSUME_TIME_DIVIDE:1,CONSUME_RAW:2,RECYCLE:3,RECYCLE_TIME_DIVIDE:4,RECYCLE_RAW:5,RECYCLE_TIME_DIVIDE_MULTI:6}},66772:function(e,r,t){"use strict";t.d(r,{a:function(){return n}});var n={DEFAULT:0,SPECIAL:1}},1426:function(e,r,t){"use strict";var n=t(34575),a=t.n(n),i=t(93913),s=t.n(i),o=t(2205),h=t.n(o),u=t(78585),c=t.n(u),l=t(29754),p=t.n(l),f=t(17187),_=t(55666),d=t(89260),E=t(47283),v=t(47255),S=t(83242);function g(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=p()(e);if(r){var a=p()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return c()(this,t)}}var y=_.Z.ShareErrorCode,m=function(e){h()(t,e);var r=g(t);function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a()(this,t),(e=r.call(this,n)).ShareEntityClass=d.Z,e._hasInited=!1,e.shareEntity=n.shareEntity,e.shareEntityMap=n.shareEntityMap||{},e.disableShareTypes=n.disableShareTypes||[],e}return s()(t,[{key:"initShare",value:function(){this._hasInited||(this._hasInited=!0,this.setMaxListeners(0),this._setupShareTypes(),this._setupPlatformShareSDK())}},{key:"isInited",value:function(){return this._hasInited}},{key:"share",value:function(e){return y.SHARE_ACTION_DISABLE}},{key:"setShareCheck",value:function(e){}},{key:"checkShareTypeEnable",value:function(e){return 0}},{key:"_setupShareTypes",value:function(){return!0}},{key:"_setupPlatformShareSDK",value:function(){return Promise.resolve()}},{key:"getShareEntityByShareType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return e?this.shareEntityMap[e]||(r?null:this.shareEntity):this.shareEntity}},{key:"refreshShare",value:function(e,r){return e?(r?this.shareEntityMap[r]=e:this.shareEntity=e,this._setupPlatformShareSDK()):Promise.resolve()}},{key:"disableShare",value:function(e){var r=this;if(e&&"number"==typeof e)this.disableShareTypes.indexOf(e)<0&&this.disableShareTypes.push(e);else{if("[object Array]"!==Object.prototype.toString.call(e))return;this.disableShareTypes=this.disableShareTypes.concat(e.filter((function(e){return(r.disableShareTypes||[]).indexOf(e)<0})))}!this._setupShareTypes()&&this._adjustMenu()}},{key:"_adjustMenu",value:function(){}},{key:"createShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=this.ShareEntityClass||d.Z;if(t)return new n(e);var a={};if(r){var i=this.shareEntityMap[r];a=i?Object.assign({},i,e):Object.assign({},this.shareEntity,e)}else a=Object.assign({},this.shareEntity,e);return new n(a)}},{key:"setupNativeShareButton",value:function(e){return y.SHARE_NOT_SUPPORTED}},{key:"copyCipher",value:function(){var e=this,r=E.Z.COPY_CIPHER,t=this.getShareEntityByShareType(r),n=t.cipherScene&&"string"==typeof t.cipher;return!n&&this.emit(v.Z.ON_SHARE_TRIGGER,{shareType:r}),t?(t.normalize(r).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n&&(e.emit(v.Z.ON_SHARE_TRIGGER,{shareType:r,shareID:t.shareID}),delete t.shareID),e.emit(v.Z.ON_SHARE_COMPLETED,{shareType:r,shareResultType:S.Z.SUCCESS,content:t.title,rawResponse:t.rawResponse},e.getNormalizeErrorHandler(r))})),0):y.SHARE_PARAMS_NOT_VALID}},{key:"getNormalizeErrorHandler",value:function(e){var r=this;return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.emit(v.Z.ON_SHARE_COMPLETED,{shareType:e,shareResultType:S.Z.FAIL,errorPayload:n})}}},{key:"resetLimiter",value:function(){}}]),t}(f.EventEmitter);r.Z=m},89260:function(e,r,t){"use strict";t.d(r,{W:function(){return E}});var n=t(48926),a=t.n(n),i=t(34575),s=t.n(i),o=t(93913),h=t.n(o),u=t(87757),c=t.n(u),l=t(2841),p=t(6449),f=t(24114),_=t(7958),d=t(74826);function E(e){for(var r=[],t=1;t<arguments.length;++t)r.push(arguments[t]);return e.replace(/{(\d+)}/g,(function(e,t){return 0===r[t]?0:r[t]||""}))}var v=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.title=r.title||"",this.message=r.message||"",this.shareURL=r.shareURL||"",this.targetShareURL="",this.realShareURL="",this.shareDomain=r.shareDomain||"",this.thumbnailURL=r.thumbnailURL||"",this.timelineDomain=r.timelineDomain||"",this.timelineAppId=r.timelineAppId||"",this.marketActivityID=r.marketActivityID||0,this.urlWrapType=r.urlWrapType||p.ZP.DEFAULT,this.shortURLApi=r.shortURLApi||"",this.domainURLApi=r.domainURLApi||"",this.payloadMixin=r.payloadMixin||null,this.requestUsePost=r.requestUsePost||!1,this.shortCommandApi=r.shortCommandApi||"",this.cipherProcessor=r.cipherProcessor}var r;return h()(e,[{key:"normalize",value:(r=a()(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"setShareURLQueries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlWrapType!==p.ZP.RAW&&(this.shareID=e.refer_share_id,this.shareURL=(0,l.Z)(e,this.shareURL))}},{key:"getShareForm",value:function(e){return f.Z.DEFAULT}},{key:"getShareMethod",value:function(e){return _.Z.DEFAULT}},{key:"processCipher",value:function(){var e=this,r=Object.assign({},this),t={title:r.title},n=t.title||"";return(0,d.Yy)(r).then((function(r){var a=r.targetShareURL,i=r.useShortURL,s=r.shareText,o=r.cipher;o&&(t.cipher=o),e.targetShareURL=a;var h=i||o?s:"";return n=E(n,h||a,a,h),t.title=n,e.pcode=n,t}))}}]),e}();r.Z=v},55666:function(e,r,t){"use strict";t.d(r,{D:function(){return o}});var n=t(93913),a=t.n(n),i=t(34575),s=t.n(i),o={DEFAULT:0,SHARE_PARAMS_NOT_VALID:1,SHARE_TYPE_DISABLED:2,SHARE_TYPE_NOT_FOUND:3,SHARE_ACTION_DISABLE:4,SHARE_STATUS_ILLEGAL:5,SHARE_NOT_SUPPORTED:6,SHARE_LIMITER_NOT_INIT:7},h=a()((function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.errorCode=r.errorCode||o.DEFAULT,this.message=r.message||""}));h.create=function(e){return new h({errorCode:e})},h.ShareErrorCode=o,r.Z=h},47255:function(e,r){"use strict";r.Z={DEFAULT:0,ON_SHARE_TRIGGER:1,ON_SHARE_COMPLETED:2,SDK_INIT_FAILED:3,ON_SHARE_BUTTON_CLICKED:4,ON_SHARE_PREPARE:5,ON_SDK_READY:6,ON_SHARE_INTERRUPT:7,SHARE_LIMIT_LOAD_FAIL:8,PERFORM_LOG_FAILED:9,SHARE_REACH_LIMIT:10}},24114:function(e,r){"use strict";r.Z={DEFAULT:"",COMMAND:"kouling",IMAGE:"image",TEXT:"text",CARD:"card",WXAPP_CARD:"custom_card",COPY_LINK:"text"}},90793:function(e,r){"use strict";r.Z={CIPHER:"CIPHER_TEXT",LINK:"LINK",DOMAIN:"DOMAIN",NORMAL:"NORMAL",IMAGE:"IMAGE",COPY:"COPY"}},21772:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(17258);function a(){var e=(0,n.zT)();return e.isWeChatMiniProgram?e.WxApp:e.isWeChatPlatform?e.WeChat:e.isQQPlatform?e.QQ:e.isNativePlatform||e.isTinyNativePlatform?"h5":""}},94244:function(e,r,t){"use strict";t.d(r,{I:function(){return s},w:function(){return o}});var n=t(6449),a=t(24114),i=t(90793);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title,message:e.message,thumb_url:e.thumbnailURL,share_url:e.shareURL}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return(0,n.Pp)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(r)===a.Z.COMMAND?i.Z.CIPHER:(0,n.Pp)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(r)===a.Z.TEXT?i.Z.LINK:(0,n.uW)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(r)===a.Z.CARD?i.Z.DOMAIN:e.getShareForm(r)===a.Z.IMAGE?i.Z.IMAGE:i.Z.NORMAL}},7958:function(e,r){"use strict";r.Z={DEFAULT:"",SYSTEM:"system",SDK:"sdk",MANUAL:"manual",EXTENSION:"extension",STAND:"stand"}},83242:function(e,r){"use strict";r.Z={COMPLETE:0,SUCCESS:1,FAIL:2,CANCEL:3,ERROR:4}},92852:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(12714);function a(e){var r=e.errorCode,t=void 0===r?0:r,a=e.message,i=void 0===a?"":a,s=e.options,o=void 0===s?{}:s;(0,n.K2)(new Error("share error"),{error_code:t,error_message:i,params:JSON.stringify(o)})}},47283:function(e,r){"use strict";r.Z={DEFAULT:0,WECHAT_SESSION:1,WECHAT_TIMELINE:2,WEIBO:3,QQ_CHAT_SESSION:4,QQ_ZONE:5,TENCENT_WEIBO:6,WECHAT_SESSION_APP:7,WECHAT_TIMELINE_IMAGE:8,WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:9,WECHAT_SESSION_IMAGE:10,QQ_CHAT_SESSION_IMAGE:11,QQ_ZONE_IMAGE:12,WEIBO_IMAGE:13,WECHAT_TIMELINE_IMAGES:15,WECHAT_SESSION_TEXT_WITH_NO_SDK:16,WECHAT_SESSION_TEXT:17,IOS_SYSTEM_SHARE_CARD:18,WECHAT_SESSION_IMAGE_WITH_NO_SDK:19,WECHAT_SESSION_IMAGES_WITH_NO_SDK:20,WECHAT_TIMELINE_TEXT:21,SHARE_IMAGE_PASSIVELY:22,COPY_LINK:23,WECHAT_SESSION_MUSIC:24,WECHAT_SESSION_VIDEO:25,COPY_CIPHER:9995,WECHAT_SESSION_CARD_WITH_NO_SDK:9996,WECHAT_TIMELINE_CARD_WITH_NO_SDK:9997,FRIENDS:9998,WECHAT_BIG_IMAGE:9999,PIN_TIMELINE:1e4}},44725:function(e,r){"use strict";r.Z={DEFAULT:"!share_v2",WE_CHAT_MSG:"!share_v3",SHARE:"!share",TRANSPARENT:"!transparent",NONE:"",NO_LOGO:"!share_v4"}},34178:function(e,r,t){"use strict";t.d(r,{q:function(){return n}});var n={DEFAULT:0,ANDROID_SP:1}},79354:function(e,r,t){"use strict";t.d(r,{X:function(){return n}});var n={TP_FIRST:0,GENERAL_FIRST:1,GENERAL_ONLY:2}},49379:function(e,r){"use strict";r.Z={DEFAULT:0,OPEN_WECHAT:1,OPEN_QQ:2,OPEN_WEIBO:3,OPEN_WECHAT_IOS_SILENT:101,OPEN_WECHAT_ANDROID_SILENT:201}},3590:function(e,r,t){"use strict";t.r(r),t.d(r,{CipherConsumeMode:function(){return Ke.J},CipherPasteType:function(){return ze.a},ShareChannel:function(){return U},ShareErrorCode:function(){return qe},ShareEventType:function(){return v.Z},ShareForm:function(){return P.Z},ShareMethod:function(){return I.Z},ShareResult:function(){return A},ShareResultType:function(){return C.Z},ShareType:function(){return E.Z},ShareWaterMark:function(){return Me.Z},SystemShareMode:function(){return Ve.q},TPSelectCategory:function(){return Ye.X},ThirdPartyOpenType:function(){return Ge.Z},URLWrapType:function(){return te.ZP},default:function(){return Xe},setPageContext:function(){return ae.I8}});var n=t(50008),a=t.n(n),i=t(48926),s=t.n(i),o=t(34575),h=t.n(o),u=t(93913),c=t.n(u),l=t(87757),p=t.n(l),f=t(54268),_=t(97877),d=t(30064),E=t(47283),v=t(47255),S=t(17258),g=t(59713),y=t.n(g),m=t(12045),R=t(99433),I=t(7958),A={SUCCESS:"success",FAIL:"fail",CANCEL:"cancel",COMPLETE:"complete",ERROR:"error"},C=t(83242),T=t(55666),P=t(24114),O=t(1426),L="event",D={SHARE:"share",SHARE_RESULT:"share_result"},k=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this.userID=r.userID||"",this.uin=r.uin||"",this.shareID=r.shareID||"",this.op=r.op||L,this.subOP=r.subOP||"",this.shareChannel=r.shareChannel||"",this.shareResult=r.shareResult||"",this.shareURL=r.shareURL||"",this.shareDomain=r.shareDomain||"",this.shareForm=r.shareForm||"",this.shareMethod=r.shareMethod||"",this.shareAppID=r.shareAppID,this.pcode=r.pcode,this.wxShareCount=r.wxShareCount,this.cipherScene=r.cipherScene}return c()(e,[{key:"normalize",value:function(e){if(this.subOP===D.SHARE)return{op:this.op,sub_op:this.subOP,share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,pcode:this.pcode,pcode_scene:this.cipherScene};if(this.subOP===D.SHARE_RESULT){var r={op:this.op,sub_op:this.subOP,event:"share_result",share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_result:this.shareResult,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,wx_share_count:this.wxShareCount,pcode:this.pcode,pcode_scene:this.cipherScene};return this.walrusID&&(r.walrus_id=this.walrusID,r.walrus_type=this.walrusType),r}return{}}},{key:"getShareURLTrackingQueries",value:function(){return e.getTrackingQueries(this)}}]),e}();k.TRACKING_SUB_OP=D,k.getTrackingQueries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{refer_share_id:e.shareID,refer_share_uid:e.userID,refer_share_uin:e.uin,refer_share_channel:e.shareChannel}};var N=k,b=t(34427);function M(e){return e=e||32,(0,b.x)(e)}var w,U={UNKNOWN:"unknown",APP_MESSAGE:"message",TIMELINE:"timeline",QQ:"qq",QQ_ZONE:"qzone",QQ_WEIBO:"qq_weibo",SINA_WEIBO:"weibo",CLIPBOARD:"copy_link"},Z=(w={1:U.APP_MESSAGE,2:U.TIMELINE,3:U.SINA_WEIBO,4:U.QQ,5:U.QQ_ZONE,8:U.TIMELINE,9:U.TIMELINE,10:U.APP_MESSAGE,11:U.QQ,12:U.QQ_ZONE,13:U.SINA_WEIBO,16:U.APP_MESSAGE,17:U.APP_MESSAGE,18:U.APP_MESSAGE,19:U.APP_MESSAGE,20:U.APP_MESSAGE,21:U.TIMELINE,23:U.CLIPBOARD,24:U.APP_MESSAGE,25:U.APP_MESSAGE},y()(w,E.Z.COPY_CIPHER,U.CLIPBOARD),y()(w,E.Z.WECHAT_SESSION_CARD_WITH_NO_SDK,U.APP_MESSAGE),y()(w,E.Z.WECHAT_TIMELINE_CARD_WITH_NO_SDK,U.TIMELINE),w);function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Z[e]||U.UNKNOWN}var x=t(63623),W=t(56108),B="",j="";function F(){return Promise.all([(0,W.sq)().then((function(e){B=e})).catch((function(e){})),(0,W.A8)().then((function(e){j=e})).catch((function(e){}))])}function Q(){return j}function G(){return B}var K,Y=t(36792),z=0,V=1,q=(K={},y()(K,U.UNKNOWN,0),y()(K,U.APP_MESSAGE,1),y()(K,U.TIMELINE,1),y()(K,U.QQ,2),y()(K,U.QQ_ZONE,2),y()(K,U.QQ_WEIBO,2),y()(K,U.SINA_WEIBO,3),K);var X=function(e){return q[e]||z},J=function(){function e(){h()(this,e),this._venderAppIDs={},this._isInited=!1}return c()(e,[{key:"build",value:function(e){var r=e.wechatAppID;return this._isInited?Promise.resolve():(this._isInited=!0,(0,S.zT)().isNativePlatform?this._buildNativeCache():(0,S.zT)().isWeChatPlatform?this._buildWeChatCache(r):Promise.resolve())}},{key:"isInited",value:function(){return this._isInited}},{key:"_buildNativeCache",value:function(){var e,r=this;return(e=[V],(0,S.zT)().statisfy("4.49.0","4.49.0","greaterThan")?Array.isArray(e)?(0,Y.Q6)("JSShare","venderAppIds",{channels:e}):Promise.reject({message:"invalid params"}):Promise.reject({message:"not support"})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r._venderAppIDs=Object.assign(r._venderAppIDs,e)})).catch((function(){return Promise.resolve()}))}},{key:"_buildWeChatCache",value:function(e){return this._venderAppIDs[V]=e,Promise.resolve()}},{key:"getAppIDSync",value:function(e){var r=X(e);return this._venderAppIDs[r]}}]),e}(),$=null;J.getInstance=function(e){return $||($=new J(e)),$};var ee=J,re=t(72824),te=t(6449),ne=t(49820),ae=t(84009);function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function se(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ie(Object(t),!0).forEach((function(r){y()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var oe=T.Z.ShareErrorCode,he=N.TRACKING_SUB_OP;var ue=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this.transparentTransmission=r.transparentTransmission||{},this.trackingEntity=null,this.onTriggerListener=null,this.onCompletedListener=null,this.shareController=null,this._cachePrepareInfo={}}return c()(e,[{key:"listen",value:function(e){e&&e instanceof O.Z&&(this.disconnect(),this.shareController=e,this._setupDefaultTrackListener(e))}},{key:"disconnect",value:function(){this.shareController&&this._removeDefaultTrackListener(this.shareController)}},{key:"updateTrackerTrans",value:function(e){this.transparentTransmission=Object.assign({},this.transparentTransmission,e)}},{key:"_setupDefaultTrackListener",value:function(e){this._removeDefaultTrackListener(e),this.onPrepareListener=this._onDefaultSharePrepare.bind(this),this.onTriggerListener=this._onDefaultShareTrigger.bind(this),this.onCompletedListener=this._onDefaultShareCompleted.bind(this),e.on(v.Z.ON_SHARE_PREPARE,this.onPrepareListener),e.on(v.Z.ON_SHARE_TRIGGER,this.onTriggerListener),e.on(v.Z.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_removeDefaultTrackListener",value:function(e){this.onPrepareListener&&e.removeListener(v.Z.ON_SHARE_PREPARE,this.onPrepareListener),this.onTriggerListener&&e.removeListener(v.Z.ON_SHARE_TRIGGER,this.onTriggerListener),this.onCompletedListener&&e.removeListener(v.Z.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_sendLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign(e,this.transparentTransmission);(0,m.oP)(se({page_id:(0,ae.e6)(),page_name:(0,ae.j0)(),page_sn:(0,ae.kd)()},r))}},{key:"_onDefaultSharePrepare",value:function(e){var r=e.shareType;if(this._cachePrepareInfo[r]){var t=this.shareController.getShareEntityByShareType(r)||{},n=this._cachePrepareInfo[r];return n.userID=G(),n.uin=Q(),void t.setShareURLQueries(N.getTrackingQueries(n))}var a=this.shareController.getShareEntityByShareType(r),i={userID:G(),uin:Q(),shareID:this._getCachedShareID(a)||M(),shareChannel:H(r)};a&&a.setShareURLQueries(N.getTrackingQueries(i)),this._cachePrepareInfo[r]=i}},{key:"_onDefaultShareTrigger",value:function(e){var r=e.shareType,t=e.shareID;if(r===E.Z.PIN_TIMELINE||(0,S.zT)().isWeChatMiniProgram&&r===E.Z.WECHAT_SESSION)return 0;var n=this.shareController.getShareEntityByShareType(r)||{},a=this._cachePrepareInfo[r];this._cachePrepareInfo[r]=null;var i=H(r),s=ee.getInstance();if(this.trackingEntity=new N(Object.assign({userID:G(),uin:Q(),shareID:this._getCachedShareID(n)||M(),subOP:he.SHARE,shareChannel:i,timelineDomain:n.timelineDomain,cipherScene:n.cipherScene,shareForm:n.getShareForm&&n.getShareForm(r),shareMethod:n.getShareMethod&&n.getShareMethod(r),shareAppID:s.getAppIDSync(i)},a,t?{shareID:t}:null)),!a&&n.setShareURLQueries(N.getTrackingQueries(this.trackingEntity)),n.getShareForm(r)!==P.Z.COMMAND){var o=n.targetShareURL||n.shareURL;this.trackingEntity.shareURL=o,this.trackingEntity.shareDomain=new x.Z(o).origin}this._sendLog(this.trackingEntity.normalize(r))}},{key:"_onDefaultShareCompleted",value:function(e){var r=e.shareType,t=e.shareResultType,n=e.useComplete,i=e.responseData,s=void 0===i?{}:i,o=e.tpInfo,h=(0,S.zT)();if(r===E.Z.PIN_TIMELINE||h.isWeChatMiniProgram&&r===E.Z.WECHAT_SESSION)return 0;if(!this.trackingEntity)return oe.SHARE_STATUS_ILLEGAL;var u=this.shareController.getShareEntityByShareType(r)||{},c=this.getShareResultByType(t);if(n&&(c=A.COMPLETE),u.getShareForm(r)!==P.Z.COMMAND){var l=u.realShareURL||u.shareURL;this.trackingEntity.shareURL=l,this.trackingEntity.shareDomain=new x.Z(l).origin}else this.trackingEntity.pcode=u.pcode;var p,f=(p=s)&&"object"===a()(p)?"string"!=typeof p.wx_app_id?null:p.wx_app_id:null;f&&(this.trackingEntity.shareAppID=f),s.hasOwnProperty("wx_share_count")&&(this.trackingEntity.wxShareCount=s.wx_share_count,delete s.wx_share_count),this.trackingEntity.subOP=he.SHARE_RESULT,this.trackingEntity.shareResult=c,o&&(this.trackingEntity.walrusID=o.group_id,this.trackingEntity.walrusType=o.dev_type),u.forceDowngrade||h.platform===R.iw.PddIOS&&r===E.Z.WECHAT_SESSION_TEXT_WITH_NO_SDK||E.Z.COPY_LINK===r&&!h.isNativePlatform&&!h.isTinyNativePlatform||E.Z.COPY_CIPHER===r||(this._sendLog(this.trackingEntity.normalize(r)),this.trackingEntity=null)}},{key:"trackProlongation",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;if(!this.trackingEntity)return!1;this.trackingEntity.shareMethod=I.Z.MANUAL,this.trackingEntity.shareResult=A.COMPLETE;var n=Object.assign(this.trackingEntity.normalize(e),r);return this.trackingEntity=null,"function"==typeof t?t(n):this._sendLog(n),!0}},{key:"getShareResultByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case C.Z.COMPLETE:return A.COMPLETE;case C.Z.SUCCESS:return A.SUCCESS;case C.Z.FAIL:return A.FAIL;case C.Z.CANCEL:return A.CANCEL;default:return A.ERROR}}},{key:"_getCachedShareID",value:function(e){if(e.urlWrapType===te.ZP.SERVER_SHORT_URL_WITH_CACHE){var r=(0,re.s)(),t=(0,ne.Z)(e);return r.getShareID(t)}}}]),e}(),ce=ue,le=t(48176),pe="api/flow/audience/share/content";function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,le.e)({pageInfo:{pageId:(0,ae.e6)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=r.shareParams||{},n.origin=r.platform||"",n.page_sn=r.pageSn||(0,ae.kd)()+"",n.page_info=r.pageInfo||{page_name:(0,ae.j0)(),page_url:location&&location.href},"post"===e.toLowerCase()?t.post(pe,n):t.get(pe,{params:n})}var _e="api/flow/audience/share/perform";function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,le.e)({pageInfo:{pageId:(0,ae.e6)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=r.shareParams||{},n.share_type=r.shareType||0,n.share_method=r.shareMethod||"",n.origin=r.platform||"",n.page_sn=r.pageSn||(0,ae.kd)(),n.page_info=r.pageInfo||{page_name:(0,ae.j0)(),page_url:location&&location.href},n.extra=r.extra||{},"post"===e.toLowerCase()?t.post(_e,n):t.get(_e,{params:n})}var Ee={REACH_HOUR_LIMIT:43367,REACH_DAY_LIMIT:43368},ve=function(){function e(){h()(this,e),this._shareController=null,this._onPerformShareErrorHandler=null}return c()(e,[{key:"listen",value:function(e){e&&e instanceof O.Z&&(this.disconnect(),this._shareController=e,this._setupListener(e))}},{key:"disconnect",value:function(){this.removeListener()}},{key:"_setupListener",value:function(e){this.removeListener(),this._onPerformShareErrorHandler=this._onPerformShareError.bind(this),e.on(v.Z.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"removeListener",value:function(){this._shareController&&this._onPerformShareErrorHandler&&this._shareController.removeListener(v.Z.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"_onPerformShareError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.error||{},t=e.shareType,n=parseInt(r.errorCode,10)||0;[Ee.REACH_DAY_LIMIT,Ee.REACH_HOUR_LIMIT].indexOf(n)>=0&&(this._shareController.emit(v.Z.SHARE_REACH_LIMIT,{shareType:t,errorCode:n}),this.hideShareMenuOption(t))}},{key:"hideShareMenuOption",value:function(e){var r=this._shareController;e&&r&&r.disableShare(e)}}]),e}(),Se=ve,ge=t(92852),ye=t(94244),me=t(21772),Re="undefined"!=typeof window;function Ie(){return(Ie=s()(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(5911).then(t.bind(t,68418));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=s()(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=(0,S.zT)()).isWeChatMiniProgram){e.next=7;break}return e.next=4,t.e(3400).then(t.bind(t,69815));case 4:case 10:case 16:case 22:case 27:return e.abrupt("return",e.sent.default);case 7:if(!r.isWeChatPlatform){e.next=13;break}return e.next=10,t.e(2840).then(t.bind(t,46841));case 13:if(!r.isQQPlatform){e.next=19;break}return e.next=16,t.e(6795).then(t.bind(t,63262));case 19:if(!r.isNativePlatform&&!r.isTinyNativePlatform){e.next=25;break}return e.next=22,t.e(5911).then(t.bind(t,68418));case 25:return e.next=27,t.e(699).then(t.bind(t,51885));case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce={BROWSER:!0,ISAVALON:!1,BUNDLE_PLATFORM:"production",staticAssetsPath:"https://static.pddpic.com/"}.HYBRID?function(){return Ie.apply(this,arguments)}:function(){return Ae.apply(this,arguments)},Te=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this.shareController=null,this.shareTracker=null,this.menuWatcher=null,this.platform=(0,me.Z)(),this._disableContentCheck=!0,this._disablePerformShareLog=!1,this.controllerOptions=r.controllerOptions||{},this.noDefaultShare=r.noDefaultShare||!1,this.disableShare=r.disableShare||!1,this._initControllerPromise=null,this.loadErrorRetry=r.loadErrorRetry||0,this.enableInfiniteRetry=r.enableInfiniteRetry||!1,this._loadControllerFailed=!1}var r,t,n,a,i;return c()(e,[{key:"setup",value:(i=s()(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Re&&!this.shareController){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!this._loadControllerFailed||this.enableInfiniteRetry){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("load controller failed")));case 4:return this._setupShareTracker(),this._setupMenuWatcher(),this._initControllerPromise=this._initControllerPromise||this._setupController(),r=!1,e.prev=8,e.next=11,this._initControllerPromise;case 11:e.next=25;break;case 13:if(e.prev=13,e.t0=e.catch(8),this._initControllerPromise=null,!(this.loadErrorRetry>0)){e.next=22;break}(0,ge.Z)({errorCode:0,message:"加载分享控制器失败, 剩余重试次数".concat(this.loadErrorRetry),options:{message:e.t0&&e.t0.message}}),this.loadErrorRetry--,r=!0,e.next=25;break;case 22:throw this._loadControllerFailed=!0,(0,ge.Z)({errorCode:0,message:"加载分享控制器失败",options:{message:e.t0&&e.t0.message}}),e.t0;case 25:if(!r){e.next=27;break}return e.abrupt("return",this.setup());case 27:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return i.apply(this,arguments)})},{key:"_setupController",value:(a=s()(p().mark((function e(){var r,t,n,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareController){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return r=this.controllerOptions,t=(0,S.zT)(),e.next=6,Ce();case 6:n=e.sent,this.shareController=new n(r),t.isWeChatPlatform||t.isQQPlatform?this.noDefaultShare||this._prepareShareController():(t.isNativePlatform||t.isTinyNativePlatform)&&this.shareController.on(v.Z.ON_SHARE_COMPLETED,(function(e){var r=e.shareType,t=e.shareResultType,n=e.nativeShareErrorCode;t===C.Z.FAIL&&[Ee.REACH_HOUR_LIMIT,Ee.REACH_DAY_LIMIT].indexOf(n)>=0&&(a.shareController.emit(v.Z.SHARE_REACH_LIMIT,{shareType:r,errorCode:n}),(0,ge.Z)({errorCode:n,message:"分享达到上限"}))})),this.shareTracker.listen(this.shareController),this.menuWatcher.listen(this.shareController),this._setupPerformShareLog();case 12:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_prepareShareController",value:function(){this.shareController&&!this.shareController.isInited()&&this.shareController.initShare()}},{key:"_setupMenuWatcher",value:function(){this.menuWatcher||(this.menuWatcher=new Se)}},{key:"_setupShareTracker",value:function(){this.disableTracker||this.shareTracker||(this.shareTracker=new ce({transparentTransmission:this.trackerTrans}))}},{key:"_setupPerformShareLog",value:function(){var e=this;this.shareController&&!(0,S.zT)().isNativePlatform&&this.shareController.on(v.Z.ON_SHARE_COMPLETED,(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._disablePerformShareLog&&r.shareResultType===C.Z.SUCCESS&&r.shareType!==E.Z.COPY_CIPHER){var t=r.shareType,n=e.getShareEntity(t);de("post",{platform:e.platform,shareType:t,shareParams:(0,ye.I)(n),shareMethod:(0,ye.w)(n,t),extra:n.payloadMixin&&n.payloadMixin.extra}).catch((function(r){e.shareController.emit(v.Z.PERFORM_LOG_FAILED,{shareType:t,error:r})}))}}))}},{key:"share",value:(n=s()(p().mark((function e(r){var t,n,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shareController&&!this.disableShare){e.next=4;break}return(t=new Error("no controller exists")).shareType=r,e.abrupt("return",Promise.reject(t));case 4:return e.next=6,F();case 6:if(this._prepareShareController(),n=function(){return new Promise((function(e,t){var n=a,i=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.shareResultType;if(s(),C.Z.SUCCESS===n)e(r);else{var a=new Error("分享失败");Object.assign(a,r),t(a)}};function s(){n.shareController.removeListener(v.Z.ON_SHARE_COMPLETED,i)}a.shareController.on(v.Z.ON_SHARE_COMPLETED,i);var o=a.shareController.share(r);if(o){s(),a.shareController.emit(v.Z.ON_SHARE_INTERRUPT,{shareType:r,shareErrorType:o}),(0,ge.Z)({errorCode:o,message:"分享前置流程异常",options:{shareType:r}});var h=new Error("分享前置流程异常");Object.assign(h,{shareType:r,shareErrorType:o}),t(h)}}))},!(0,S.zT)().isNativePlatform){e.next=12;break}return e.abrupt("return",this.shareController.waitShareLimiter().then((function(e){return n()}),(function(e){return n()})));case 12:return e.abrupt("return",n());case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"checkShareContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fe("post",{platform:this.platform,shareParams:(0,ye.I)(e)})}},{key:"setContentCheck",value:function(e){this._disableContentCheck=!e}},{key:"setPerformShareLog",value:function(e){this._disablePerformShareLog=!e}},{key:"prepareShare",value:(t=s()(p().mark((function e(){var r,t,n,a,i,s,o=this,h=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>0&&void 0!==h[0]?h[0]:{},t=h.length>1?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},this.shareController){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("no controller exists")));case 5:return e.next=7,F();case 7:if(this._prepareShareController(),a=r.entityConfig,i=void 0===a?{}:a,s=this.shareController.createShareEntity(i,t),!(n.skipShareContentCheck||this._disableContentCheck||(0,S.zT)().isNativePlatform)){e.next=12;break}return e.abrupt("return",this.shareController.refreshShare(s,t));case 12:return e.abrupt("return",this.checkShareContent(s).then((function(){return o.shareController.refreshShare(s,t)})));case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getShareController",value:function(){return this.shareController}},{key:"getShareControllerAsync",value:(r=s()(p().mark((function e(){var r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareController){e.next=2;break}return e.abrupt("return",this.shareController);case 2:if(!this._initControllerPromise){e.next=4;break}return e.abrupt("return",this._initControllerPromise.then((function(e){return r.shareController})).catch((function(e){return null})));case 4:return e.abrupt("return",this.setup().then((function(e){return r.shareController})).catch((function(e){return null})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getShareTracker",value:function(){return this.shareTracker}},{key:"getShareEntity",value:function(e,r){return this.shareController?this.shareController.getShareEntityByShareType(e,r):null}},{key:"setupNativeShareButton",value:function(e,r){this.shareController&&(this.shareController.removeAllListeners(v.Z.ON_SHARE_BUTTON_CLICKED),"function"==typeof r&&this.shareController.on(v.Z.ON_SHARE_BUTTON_CLICKED,r),this.shareController.setupNativeShareButton(e))}}]),e}(),Pe=Te,Oe={title:0,message:0,thumbnailURL:0,shareURL:0,shareDomain:0,waterMark:0,urlWrapType:0,drawImageOptions:0,drawImageClass:0,marketActivityID:0,miniObjectPath:0,miniObjectID:0,useWxAppShare:0,shortURLApi:0,shortCommandApi:0,domainURLApi:0,forceDowngrade:0,payloadMixin:0,requestUsePost:0,excludeShareChoices:0,thirdPartyOpenType:0,needSharedAmount:0,cipherScene:0,consumeMode:0,activitySceneSn:0,tpSelectCategory:0,pinTimelineParams:0,wxAppRequestPayload:0,cipherProcessor:0,wxAppNavigatePayload:0,withShareTicket:0,systemShareMode:0,wechatMaskConfig:0},Le={noDefaultShare:0,isSDKPrepare:0,disableShare:0},De={wechatAppID:0,magicTrace:0,shareTypeEnable:0},ke={USELESS:-1,DEFAULT:0,OUT_OF_DATE:1,FORBIDDEN:2,ABANDONED:3},Ne=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this.cacheRaw=r.cacheRaw||!1,this.deleteAfterCollect=r.deleteAfterCollect||!1}return c()(e,[{key:"filter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this._filterShareEntity(e),t=this._filterShareConfigFlag(e),n=this._filterShareOther(e),a={};return{_rawShareInfo:this.cacheRaw?e:null,entityConfig:r,flowControllConfig:t,otherConfig:n,compatibleShareConfig:a}}},{key:"_filterByItems",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t)||[],a={};return n.forEach((function(n,i){var s=t[n];s===ke.FORBIDDEN||s===ke.ABANDONED?delete r[n]:void 0!==r[n]&&(a[n]=r[n],e.deleteAfterCollect&&delete r[n])})),a}},{key:"_filterShareEntity",value:function(e){return this._filterByItems(e,Oe)}},{key:"_filterShareConfigFlag",value:function(e){return this._filterByItems(e,Le)}},{key:"_filterShareOther",value:function(e){return this._filterByItems(e,De)}}]),e}(),be=Ne,Me=t(44725),we=t(24117),Ue=t(2841),Ze=t(864),He={};"undefined"!=typeof window&&(He=we.Z.get(location.host)||{});var xe={code:null,from:null,isappinstalled:null,at:null,share_id:null,is_back:null,page_id:null,list_id:null},We=["refer_page_name","refer_page_section","refer_page_element","refer_page_id","refer_page_sn","refer_page_el_sn","refer_mid","refer_adg","refer_cam","refer_ced"];function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(e=e||"").indexOf("!")>=0&&!t?e:(e=e.split("!")[0],e+=r)}var je=null,Fe=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this._hasInited=!1,this.opts=r||{},this.shopConfig=r.shopConfig,this.defaultShareEntityConfig={},this.shareManager=null,this.shareInfoFilter=null,this._sdkPrepared=!1}var r,t,n,i,o,u;return c()(e,[{key:"setup",value:function(){this._hasInited||(this._hasInited=!0,this._setupShareInfoFilter(),this._setupShareManager(),!(this.opts.shareManagerConfig||{}).noDefaultShare&&this._prepareDefaultShare(),this.waitAppIDCacheBuild())}},{key:"_setupShareInfoFilter",value:function(){this.shareInfoFilter||(this.shareInfoFilter=new be(this.opts.shareInfoFilterConfig))}},{key:"_setupShareManager",value:function(){var e=this;if(!this.shareManager){var r=Object.assign({},{noDefaultShare:!1,disableShare:!1,useNativeShareButton:!1,loadErrorRetry:1,enableInfiniteRetry:!1},this.opts.shareManagerConfig);this.shareManager=new Pe(r)}return this._managerReadyPromise=this._managerReadyPromise||this.shareManager.setup(),this._managerReadyPromise.then((function(r){e._managerReady=!0})).catch((function(r){e._managerReadyPromise=null})),this._managerReadyPromise}},{key:"_prepareDefaultShare",value:function(){if(!(0,S.zT)().isWeChatMiniProgram){var e=(this.shopConfig||He.shop||{}).name||"拼多多";Object.assign(this.defaultShareEntityConfig,{title:"".concat(e,"商城"),message:"风靡全国的拼单商城，优质商品新鲜直供，快一起来".concat(e,"吧"),thumbnailURL:(0,f.H)("/base/logo.jpg"),shareURL:"/"}),this.prepareShare(this.defaultShareEntityConfig,void 0,{skipShareContentCheck:!0})}}},{key:"_prepareShareByShareType",value:(u=s()(p().mark((function e(){var r,t,n,a,i,s=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>0&&void 0!==s[0]?s[0]:{},t=s.length>1?s[1]:void 0,n=s.length>2?s[2]:void 0,this.setup(),this._managerReady){e.next=7;break}return e.next=7,this.waitManagerReady();case 7:return a=r.entityConfig,i=void 0===a?{}:a,this._buildThumbnailURL(i,t),this._buildShareURL(i,t),e.abrupt("return",this.shareManager.prepareShare(r,t,n));case 11:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"prepareShare",value:function(e,r){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setup();var a=this.shareInfoFilter.filter(e),i=this._prepareShareByShareType(a,r,n);return!this._sdkPrepared&&i.then((function(e){t._checkSDKPrepared(a)}),(function(e){t._checkSDKPrepared(a)})),i}},{key:"prepareShareSafe",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.setup();var n=this.shareInfoFilter.filter(r),a=n.flowControllConfig,i=void 0===a?{}:a;if(!this._sdkPrepared&&!i.isSDKPrepare)return this.waitSDKReady().then((function(){return e._prepareShareByShareType(n,t)}));var s=this._prepareShareByShareType(n,t);return!this._sdkPrepared&&s.then((function(r){e._checkSDKPrepared(n)}),(function(r){e._checkSDKPrepared(n)})),s}},{key:"waitSDKReady",value:function(){var e=this;return this.waitWeChatSDKReady().then((function(){return e.waitAppIDCacheBuild()}))}},{key:"waitWeChatSDKReady",value:(o=s()(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sdkPrepared){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:if(!this.sdkReadyPromise){e.next=8;break}return e.abrupt("return",this.sdkReadyPromise);case 8:return e.next=10,this.shareManager.getShareControllerAsync();case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return",Promise.resolve());case 13:return this.sdkReadyPromise=new Promise((function(e,t){r.once(v.Z.ON_SDK_READY,(function(){e()}))})),e.abrupt("return",this.sdkReadyPromise);case 15:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"waitAppIDCacheBuild",value:(i=s()(p().mark((function e(){var r,t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=ee.getInstance()).isInited()){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:if(!this._actualWeChatAppID){e.next=9;break}return e.abrupt("return",r.build({wechatAppID:this._actualWeChatAppID}));case 9:if(this.appIDReadyPromise){e.next=16;break}return e.next=12,this.shareManager.getShareControllerAsync();case 12:if(t=e.sent){e.next=15;break}return e.abrupt("return",Promise.resolve());case 15:this.appIDReadyPromise=new Promise((function(e,n){t.once(v.Z.ON_SDK_READY,(function(t){var n=t.wechatAppID,a=t.magicTrace;Promise.all([r.build({wechatAppID:n}),Ze.Z.getInstance().build({magicTrace:a})]).then((function(){e()}))}))}));case 16:return e.abrupt("return",this.appIDReadyPromise);case 17:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"waitManagerReady",value:function(){return this._managerReady?Promise.resolve():this._managerReadyPromise?this._managerReadyPromise:this._setupShareManager()}},{key:"share",value:(n=s()(p().mark((function e(r,t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),!t){e.next=5;break}return e.abrupt("return",this.prepareShareSafe(t,r).then((function(){return n.shareManager.share(r)})));case 5:if(this._managerReady){e.next=8;break}return e.next=8,this.waitManagerReady();case 8:return e.abrupt("return",this.shareManager.share(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return n.apply(this,arguments)})},{key:"_buildThumbnailURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=e.thumbnailURL;if(void 0!==t){var n=e.waterMark,a=t||"";null==n&&(n=Me.Z.DEFAULT),a=Be(a,n),r===E.Z.WECHAT_SESSION&&n===Me.Z.DEFAULT&&(a=Be(a,Me.Z.WE_CHAT_MSG,!0)),a=(a||"").replace(/^\/\//,"http://"),e.thumbnailURL=a}}},{key:"_buildShareURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=e.shareURL;if(t){if(e.urlWrapType!==te.ZP.RAW){var n=new x.Z(t),a=n.query||{},i=Object.keys(a).reduce((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return We.indexOf(r)>=0&&(e[r]=null),e}),{}),s=(0,_.H4)(!0),o={_wv:41729,_wvx:10};!(0,S.zT)().isWeChatPlatform||r!==E.Z.QQ_CHAT_SESSION&&r!==E.Z.QQ_ZONE||(o.sf_tag="wechat"),r!==E.Z.WECHAT_TIMELINE_IMAGE&&r!==E.Z.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK||(o.from="qrImg");var h=n.pathname||"",u=Object.assign({},o,s,a,xe,i),c=e.shareDomain||He.shareDomain;e.shareURL=(0,Ue.Z)(u,(0,d.De)(h),c)}}else delete e.shareURL}},{key:"_checkSDKPrepared",value:(t=s()(p().mark((function e(r){var t,n,i,s,o,h,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.flowControllConfig,n=void 0===t?{}:t,i=r.otherConfig,s=void 0===i?{}:i,!n.isSDKPrepare||this._sdkPrepared){e.next=10;break}return this._sdkPrepared=!0,e.next=5,this.shareManager.getShareControllerAsync();case 5:o=e.sent,s.wechatAppID&&(this._actualWeChatAppID=s.wechatAppID),(h=s.shareTypeEnable)&&"object"===a()(h)&&(u=Object.keys(h).filter((function(e){return!h[e]})).map((function(e){return parseInt(e,10)})),o&&o.disableShare(u)),o&&o.emit(v.Z.ON_SDK_READY,{wechatAppID:s.wechatAppID,magicTrace:s.magicTrace});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getShareManager",value:function(){return this.setup(),this.shareManager}},{key:"setupNativeShareButton",value:(r=s()(p().mark((function e(r,t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),this.shareManager){e.next=3;break}return e.abrupt("return");case 3:if(this._managerReady){e.next=6;break}return e.next=6,this.waitManagerReady();case 6:return e.abrupt("return",this.shareManager.setupNativeShareButton(r,t));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),e}();Fe.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return je||(je=new Fe(e)),je};var Qe=Fe,Ge=t(49379),Ke=t(84193),Ye=t(79354),ze=t(66772),Ve=t(34178),qe=T.Z.ShareErrorCode,Xe=Qe},2399:function(e,r,t){"use strict";t.d(r,{i:function(){return i}});var n=t(47283),a=[n.Z.QQ_CHAT_SESSION,n.Z.QQ_ZONE,n.Z.QQ_CHAT_SESSION_IMAGE,n.Z.QQ_ZONE_IMAGE],i=function(e){return a.indexOf(e)>=0}},72824:function(e,r,t){"use strict";t.d(r,{s:function(){return l}});var n=t(69100),a=t.n(n),i=t(34575),s=t.n(i),o=t(93913),h=t.n(o),u=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this._cacheMap={},this._cacheLimit=r.cacheLimit||20}return h()(e,[{key:"getResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this._cacheMap[e];return r?r.response:null}},{key:"cacheResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(e&&r){var t=Object.keys(this._cacheMap).length||0;if(!(t>=this._cacheLimit)){var n=this._cacheMap[e];n?n.response=r:this._cacheMap[e]={response:r,count:1,trigger:!1,complete:!1}}}}},{key:"_write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,n=this._cacheMap[r]||{};n[e]=t,this._cacheMap[r]=n}},{key:"_read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(this._cacheMap[r]||{})[e]}},{key:"getCountByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("count",e)||0}},{key:"increaseCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._write("count",e,this.getCountByHash()+1)}},{key:"getShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("share_id",e)}},{key:"setShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._write("share_id",e,r)}}]),e}(),c=null;function l(){return c||(c=a()(u,Array.prototype.slice.call(arguments))),c}},864:function(e,r,t){"use strict";t.d(r,{Z:function(){return R}});var n=t(34575),a=t.n(n),i=t(93913),s=t.n(i),o=t(59713),h=t.n(o),u=t(63623),c=t(2841),l=t(50008),p=t.n(l),f=t(84009),_=t(48176),d="api/flow/audience/share/trace";function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,_.e)({pageInfo:{pageId:(0,f.e6)()}},{defaultErrorHandler:function(e){}}),n={};return n.origin=r.platform||"",n.share_params=r.shareParams||{},n.page_sn=r.pageSn||(0,f.kd)()+"",n.page_info=r.pageInfo||{page_name:(0,f.j0)(),page_url:location&&location.href},r.payloadMixin&&"object"===p()(r.payloadMixin)&&(n=Object.assign(n,r.payloadMixin)),("post"===e.toLowerCase()?t.post(d,n):t.get(d,{params:n})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.magic_trace}))}var v=t(94244),S=t(21772);function g(e,r){if(!(r&&r.key&&r.value&&r.trace))return e;var t=new u.Z(e),n=r.key,a=r.value,i=r.trace;return(0,c.Z)(Object.assign(h()({},n,a),t.query),i,t.origin)}var y=function(){function e(){a()(this,e),this._isInited=!1,this._magicTrace=null}return s()(e,[{key:"build",value:function(e){var r=e.magicTrace,t=void 0===r?{}:r;return this._isInited||t.key&&t.value&&t.trace&&(this._magicTrace=t,this._isInited=!0),Promise.resolve()}},{key:"isInited",value:function(){return this._isInited}},{key:"transform",value:function(e){return g(e,this._magicTrace)}},{key:"transformByShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E("post",{platform:(0,S.Z)(),shareParams:(0,v.I)(e),payloadMixin:e.payloadMixin}).then((function(r){return g(e.shareURL,r)}))}}]),e}(),m=null;y.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m||(m=new y(e)),m};var R=y},63623:function(e,r,t){"use strict";var n=t(63038),a=t.n(n),i=t(34575),s=t.n(i),o=t(93913),h=t.n(o),u=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s()(this,e),this.hostname="",this.origin="",this.pagename="",this.pathname="",this.port=0,this.protocol="",this.query={},this.search="",this.hashTag="",this.parseURL(r)}return h()(e,[{key:"parseURL",value:function(e){var r=e.split("#"),t=r[0]||"";this.hashTag=r[1]||"";var n=t.split("?"),i=n[0]||"",s=n[1]||"";this.search="?"+s,this.query=(s.split("&")||[]).reduce((function(e){var r,t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=n.split("=");try{r=decodeURIComponent(a[0]||""),t=decodeURIComponent(a[1]||"")}catch(e){r=""}return r&&(e[r]=t),e}),{});var o=i.match(/^([a-zA-Z]+:)\/\//)||[];this.protocol=o[1]||"";o[0]&&(i=i.replace(o[0],""));var h=i.match(/^((:?[a-zA-Z0-9](:?[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})(:\d+)?\//)||[],u=(h[0]||"").replace(/\//g,"").split(":"),c=a()(u,2),l=c[0],p=c[1];this.hostname=l,this.port=parseInt(p||0,10),h[0]&&(i=i.replace(h[0],"")),this.protocol&&this.hostname&&(this.origin="".concat(this.protocol,"//").concat(this.hostname)),this.pathname="/"+i.replace(/^\//,"");var f=i.match(/\/?(\w+\.html)$/)||[];this.pagename=f[1]||""}}]),e}();r.Z=u},6449:function(e,r,t){"use strict";t.d(r,{vD:function(){return a},uW:function(){return i},Pp:function(){return s}});var n={DEFAULT:0,REDIRECT:1,SERVER_DOMAIN:2,SERVER_CONTROL:3,SERVER_SHORT_URL:4,RAW:5,SERVER_TINY_DOMAIN:6,SERVER_DOMAIN_BASE64:7,DOMAIN_REPLACE:8,MAGIC_TRACE:9,MAGIC_TRACE_DYNAMIC:10,SERVER_SHORT_URL_WITH_CACHE:11,SERVER_TP_APP:12,SERVER_TP_APP_CARD:13,SERVER_QUERY_APPEND:14,CATEGORY_PROCEDURE:15};function a(e){return[n.SERVER_CONTROL,n.SERVER_SHORT_URL,n.SERVER_TINY_DOMAIN,n.SERVER_DOMAIN_BASE64,n.DOMAIN_REPLACE,n.SERVER_SHORT_URL_WITH_CACHE].indexOf(e)>=0}function i(e){return[n.SERVER_CONTROL,n.SERVER_TINY_DOMAIN,n.SERVER_DOMAIN_BASE64,n.DOMAIN_REPLACE].indexOf(e)>=0}function s(e){return[n.SERVER_SHORT_URL,n.SERVER_SHORT_URL_WITH_CACHE,n.SERVER_TP_APP_CARD,n.CATEGORY_PROCEDURE].indexOf(e)>=0}r.ZP=n},2841:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(30064),a=t(63623);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0===window.location.href.indexOf("amcomponent://")&&(t=t||new a.Z(r).origin),r=(0,n.ru)(e,(0,n.De)(r||location.href)),t?(t=t.replace(/\/$/g,""),"".concat(t).concat((0,n.Rh)(r))):r}},49820:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(2841),a=t(2568),i=t.n(a);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.shareURL,t=(0,n.Z)({refer_share_id:null,refer_share_uid:null,refer_share_channel:null,refer_share_uin:null},r),a=e.payloadMixin||{},s=JSON.stringify(a);return i()(t+s)}},84009:function(e,r,t){"use strict";t.d(r,{I8:function(){return a},e6:function(){return i},kd:function(){return s},j0:function(){return o}});var n={};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(n,e)}function i(){return n.pageId||""}function s(){return n.pageSN||""}function o(){return n.pageName||""}},21027:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(17258),a="undefined"!=typeof window;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^http:?/)?e:(0,n.zT)().isNativePlatform||!a?"http://".concat(e):location.protocol?"".concat(location.protocol,"//").concat(e):void 0}},17183:function(e,r,t){"use strict";t.d(r,{O$:function(){return p},Hr:function(){return f},ZP:function(){return _}});var n=t(59713),a=t.n(n),i=t(30064),s=t(2841),o=t(63623),h=t(24117);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){a()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var l={};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new o.Z(e.shareURL).query||{};return{refer_share_id:r.refer_share_id,refer_share_uid:r.refer_share_uid,refer_share_channel:r.refer_share_channel,refer_share_uin:r.refer_share_uin}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^(?:https?:?)?\/\//,"https://")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.miniObjectPath,n=new o.Z(t),a=new o.Z(n.query.target_page||""),h=a.query||{},u=r.appendQuery||{},_=c(c({},p(e)),u),d=e.shareDomain||l.shareDomain;if(h.specialUrl||h.src)return h.src?h.src=(0,s.Z)(_,h.src,d):h.src=f(e.shareURL),"".concat(n.pathname,"?").concat((0,i.XP)(Object.assign({},n.query,{target_page:"".concat(a.pathname,"?").concat((0,i.XP)(h))})));if(h.jump_url||h.launch_url){if(h.jump_url){var E=new o.Z(h.jump_url);if(!E.hostname){var v=E.query;v.specialUrl&&(v.src?v.src=(0,s.Z)(_,v.src,d):v.src=f(e.shareURL),h.jump_url="".concat(E.pathname,"?").concat((0,i.XP)(v)))}}return h.launch_url&&(h.launch_url=(0,s.Z)(_,h.launch_url)),"".concat(n.pathname,"?").concat((0,i.XP)(Object.assign({},n.query,{target_page:"".concat(a.pathname,"?").concat((0,i.XP)(h))})))}return n.hostname||a.hostname||!n.query.target_page?"".concat(n.pathname,"?").concat((0,i.XP)(Object.assign({},n.query,_))):"".concat(n.pathname,"?").concat((0,i.XP)(Object.assign({},n.query,{target_page:"".concat(a.pathname,"?").concat((0,i.XP)(Object.assign(h,_)))})))}"undefined"!=typeof window&&(l=h.Z.get(location.host)||{})},96198:function(e,r,t){"use strict";t.d(r,{v3:function(){return c},X4:function(){return l},SY:function(){return f},ZP:function(){return _}});var n=t(50008),a=t.n(n),i=t(84009),s=t(48176),o=t(17183),h=t(63623),u=t(30064),c={WEIXIN_TINY_DOMAIN:"weixin",SHORT_LINK:"link"},l={WECHAT:"h5",IOS:"ios",ANDROID:"android"},p="api/flow/chron/share/miniprogram";function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,s.e)({pageInfo:{pageId:(0,i.e6)()}},{defaultErrorHandler:function(e){}}),n={};n.share_refer=(0,o.O$)({shareURL:r.shareURL}),r.payloadMixin&&"object"===a()(r.payloadMixin)&&(n=Object.assign(n,r.payloadMixin));var h=r.shortURLApi||p;return("post"===e.toLowerCase()?t.post(h,n):t.get(h,{params:n})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,s.e)({pageInfo:{pageId:(0,i.e6)()}},{defaultErrorHandler:function(e){}}),n={};n.url=r.shareURL||"",n.activity=r.marketActivityID||0,n.platform=r.platform||"",n.share_refer=(0,o.O$)({shareURL:r.shareURL}),n.page_sn=(0,i.kd)(),r.payloadMixin&&"object"===a()(r.payloadMixin)&&(n=Object.assign(n,r.payloadMixin));var l=r.urlAlias||"url_code",p=n[l];if(p&&"string"==typeof p){var f=new h.Z(p).query||{};Object.assign(f,n.share_refer),n[l]="".concat(p.split("?")[0]||"","?").concat((0,u.XP)(f))}var _="api/flow/audience/activity/domain/weixin";return r.shareDomainType===c.SHORT_LINK?_=r.shortURLApi?r.shortURLApi:r.shortCommandApi?r.shortCommandApi:"api/flow/audience/activity/domain/short_url":r.domainURLApi&&(_=r.domainURLApi),("post"===e.toLowerCase()?t.post(_,n):t.get(_,{params:n})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{domain:e.domain,openAppID:e.open_app_id||"",shortURL:e.short_url||"",shareText:e.share_text||"",raw:e}}))}},74826:function(e,r,t){"use strict";t.d(r,{Yy:function(){return S},CU:function(){return g},Ep:function(){return y},ls:function(){return m}});var n=t(6479),a=t.n(n),i=t(96198),s=t(17258),o=t(99433),h=t(2399),u=t(864),c=t(49820),l=t(72824),p=t(6449),f=t(63623),_=t(21027),d=t(2841),E=["share_title","share_img","dev_infos"],v=["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"],S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.shareURL||"",t=e.urlWrapType;if(t===p.ZP.DEFAULT||t===p.ZP.RAW)return Promise.resolve({missed:!0,realShareURL:r,targetShareURL:r});if(e.marketActivityID&&(0,p.vD)(t)){var n=(0,p.uW)(t)?i.v3.WEIXIN_TINY_DOMAIN:i.v3.SHORT_LINK,s=r.replace(/^(\w+:)?\/\//,""),o=(0,c.Z)(e),h=(0,l.s)(),_=function(){var a=new Promise((function(a,o){(0,i.ZP)(e.requestUsePost?"post":"get",{shareURL:s,marketActivityID:e.marketActivityID,platform:y(),shareDomainType:n,shortURLApi:e.shortURLApi,shortCommandApi:e.shortCommandApi,domainURLApi:e.domainURLApi,payloadMixin:e.payloadMixin}).then((function(e){if(e){var s=e.domain,o=void 0===s?"":s,h=e.shortURL,u=e.shareText,c=e.raw;if(n===i.v3.WEIXIN_TINY_DOMAIN)t===p.ZP.DOMAIN_REPLACE&&a(g(r,o));else if(n===i.v3.SHORT_LINK)return void a({useShortURL:!0,realShareURL:h||r,targetShareURL:r,shareText:u,rawResponse:c})}a({realShareURL:r,targetShareURL:r})})).catch((function(e){o(e)}))}));return n===i.v3.SHORT_LINK&&a.then((function(e){e&&e.useShortURL&&(h.cacheResponseByHash(o,e),h.setShareID(o,(new f.Z(r).query||{}).refer_share_id))})),a};if(t===p.ZP.SERVER_SHORT_URL_WITH_CACHE){var v=h.getResponseByHash(o);return v?(h.increaseCount(o),Promise.resolve(v)):_()}return _()}if(t===p.ZP.MAGIC_TRACE){var S=u.Z.getInstance().transform(r);return Promise.resolve({realShareURL:S,targetShareURL:S})}return t===p.ZP.MAGIC_TRACE_DYNAMIC?u.Z.getInstance().transformByShareEntity(e).then((function(e){return{realShareURL:e,targetShareURL:e}}),(function(){return{realShareURL:r,targetShareURL:r}})):t===p.ZP.SERVER_QUERY_APPEND?(0,i.SY)(e.requestUsePost?"post":"get",{shareURL:r,payloadMixin:e.payloadMixin,shortURLApi:e.shortURLApi}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e&&e.code_method;if(t)return{useCipher:t,realShareURL:r,targetShareURL:r};var n=e.share_title,i=e.share_img,s=e.dev_infos,o=a()(e,E),h=(0,d.Z)(o,r);return{appendQuery:o,categoryShareInfo:{title:n,thumbnailURL:i},realShareURL:h,targetShareURL:h,tpInfos:s}})):Promise.resolve({missed:!0,realShareURL:r,targetShareURL:r})},g=function(e,r){var t=(0,d.Z)({},e,(0,_.Z)(r));return{targetShareURL:t,realShareURL:t}},y=function(){var e=(0,s.zT)();return e.platform===o.iw.PddAndroid?i.X4.ANDROID:e.platform===o.iw.PddIOS?i.X4.IOS:i.X4.WECHAT},m=function(e,r){if(!(0,h.i)(e))return r;var t=new f.Z(r).hostname;return v.indexOf(t)<0&&(r=r.replace("//".concat(t),"//".concat("mobile.yangkeduo.com"))),r}},40487:function(e){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(255&e.charCodeAt(t));return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}};e.exports=r},71012:function(e){var r,t;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,r){return e<<r|e>>>32-r},rotr:function(e,r){return e<<32-r|e>>>r},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var r=0;r<e.length;r++)e[r]=t.endian(e[r]);return e},randomBytes:function(e){for(var r=[];e>0;e--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(e){for(var r=[],t=0,n=0;t<e.length;t++,n+=8)r[n>>>5]|=e[t]<<24-n%32;return r},wordsToBytes:function(e){for(var r=[],t=0;t<32*e.length;t+=8)r.push(e[t>>>5]>>>24-t%32&255);return r},bytesToHex:function(e){for(var r=[],t=0;t<e.length;t++)r.push((e[t]>>>4).toString(16)),r.push((15&e[t]).toString(16));return r.join("")},hexToBytes:function(e){for(var r=[],t=0;t<e.length;t+=2)r.push(parseInt(e.substr(t,2),16));return r},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(r.charAt(a>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|r.indexOf(e.charAt(n))>>>6-2*a);return t}},e.exports=t},48738:function(e){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},2568:function(e,r,t){var n,a,i,s,o;n=t(71012),a=t(40487).utf8,i=t(48738),s=t(40487).bin,(o=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?s.stringToBytes(e):a.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var t=n.bytesToWords(e),h=8*e.length,u=1732584193,c=-271733879,l=-1732584194,p=271733878,f=0;f<t.length;f++)t[f]=16711935&(t[f]<<8|t[f]>>>24)|4278255360&(t[f]<<24|t[f]>>>8);t[h>>>5]|=128<<h%32,t[14+(h+64>>>9<<4)]=h;var _=o._ff,d=o._gg,E=o._hh,v=o._ii;for(f=0;f<t.length;f+=16){var S=u,g=c,y=l,m=p;u=_(u,c,l,p,t[f+0],7,-680876936),p=_(p,u,c,l,t[f+1],12,-389564586),l=_(l,p,u,c,t[f+2],17,606105819),c=_(c,l,p,u,t[f+3],22,-1044525330),u=_(u,c,l,p,t[f+4],7,-176418897),p=_(p,u,c,l,t[f+5],12,1200080426),l=_(l,p,u,c,t[f+6],17,-1473231341),c=_(c,l,p,u,t[f+7],22,-45705983),u=_(u,c,l,p,t[f+8],7,1770035416),p=_(p,u,c,l,t[f+9],12,-1958414417),l=_(l,p,u,c,t[f+10],17,-42063),c=_(c,l,p,u,t[f+11],22,-1990404162),u=_(u,c,l,p,t[f+12],7,1804603682),p=_(p,u,c,l,t[f+13],12,-40341101),l=_(l,p,u,c,t[f+14],17,-1502002290),u=d(u,c=_(c,l,p,u,t[f+15],22,1236535329),l,p,t[f+1],5,-165796510),p=d(p,u,c,l,t[f+6],9,-1069501632),l=d(l,p,u,c,t[f+11],14,643717713),c=d(c,l,p,u,t[f+0],20,-373897302),u=d(u,c,l,p,t[f+5],5,-701558691),p=d(p,u,c,l,t[f+10],9,38016083),l=d(l,p,u,c,t[f+15],14,-660478335),c=d(c,l,p,u,t[f+4],20,-405537848),u=d(u,c,l,p,t[f+9],5,568446438),p=d(p,u,c,l,t[f+14],9,-1019803690),l=d(l,p,u,c,t[f+3],14,-187363961),c=d(c,l,p,u,t[f+8],20,1163531501),u=d(u,c,l,p,t[f+13],5,-1444681467),p=d(p,u,c,l,t[f+2],9,-51403784),l=d(l,p,u,c,t[f+7],14,1735328473),u=E(u,c=d(c,l,p,u,t[f+12],20,-1926607734),l,p,t[f+5],4,-378558),p=E(p,u,c,l,t[f+8],11,-2022574463),l=E(l,p,u,c,t[f+11],16,1839030562),c=E(c,l,p,u,t[f+14],23,-35309556),u=E(u,c,l,p,t[f+1],4,-1530992060),p=E(p,u,c,l,t[f+4],11,1272893353),l=E(l,p,u,c,t[f+7],16,-155497632),c=E(c,l,p,u,t[f+10],23,-1094730640),u=E(u,c,l,p,t[f+13],4,681279174),p=E(p,u,c,l,t[f+0],11,-358537222),l=E(l,p,u,c,t[f+3],16,-722521979),c=E(c,l,p,u,t[f+6],23,76029189),u=E(u,c,l,p,t[f+9],4,-640364487),p=E(p,u,c,l,t[f+12],11,-421815835),l=E(l,p,u,c,t[f+15],16,530742520),u=v(u,c=E(c,l,p,u,t[f+2],23,-995338651),l,p,t[f+0],6,-198630844),p=v(p,u,c,l,t[f+7],10,1126891415),l=v(l,p,u,c,t[f+14],15,-1416354905),c=v(c,l,p,u,t[f+5],21,-57434055),u=v(u,c,l,p,t[f+12],6,1700485571),p=v(p,u,c,l,t[f+3],10,-1894986606),l=v(l,p,u,c,t[f+10],15,-1051523),c=v(c,l,p,u,t[f+1],21,-2054922799),u=v(u,c,l,p,t[f+8],6,1873313359),p=v(p,u,c,l,t[f+15],10,-30611744),l=v(l,p,u,c,t[f+6],15,-1560198380),c=v(c,l,p,u,t[f+13],21,1309151649),u=v(u,c,l,p,t[f+4],6,-145523070),p=v(p,u,c,l,t[f+11],10,-1120210379),l=v(l,p,u,c,t[f+2],15,718787259),c=v(c,l,p,u,t[f+9],21,-343485551),u=u+S>>>0,c=c+g>>>0,l=l+y>>>0,p=p+m>>>0}return n.endian([u,c,l,p])})._ff=function(e,r,t,n,a,i,s){var o=e+(r&t|~r&n)+(a>>>0)+s;return(o<<i|o>>>32-i)+r},o._gg=function(e,r,t,n,a,i,s){var o=e+(r&n|t&~n)+(a>>>0)+s;return(o<<i|o>>>32-i)+r},o._hh=function(e,r,t,n,a,i,s){var o=e+(r^t^n)+(a>>>0)+s;return(o<<i|o>>>32-i)+r},o._ii=function(e,r,t,n,a,i,s){var o=e+(t^(r|~n))+(a>>>0)+s;return(o<<i|o>>>32-i)+r},o._blocksize=16,o._digestsize=16,e.exports=function(e,r){if(null==e)throw new Error("Illegal argument "+e);var t=n.wordsToBytes(o(e,r));return r&&r.asBytes?t:r&&r.asString?s.bytesToString(t):n.bytesToHex(t)}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-avengers/js/3590_fa4f1dcbcf4c81e180d7.js.map